<fm namespace="VendingMachine">
    <feature name="M">
        <mandatory>
            <feature name="O">
                <alternative>
                    <feature name="E"/>
                    <feature name="D"/>
                </alternative>
            </feature>
        </mandatory>
        <optional>
            <feature name="F"/>
        </optional>
        <optional>
            <feature name="R"/>
        </optional>
        <mandatory>
            <feature name="BC">
                <mandatory>
                    <feature name="B">
                        <mandatory>
                            <feature name="C"/>
                        </mandatory>
                        <optional>
                            <feature name="T"/>
                        </optional>
                        <optional>
                            <feature name="P"/>
                        </optional>
                        <optional>
                            <feature name="S"/>
                        </optional>
                    </feature>
                </mandatory>
                <mandatory>
                    <feature name="W"/>
                </mandatory>
            </feature>
        </mandatory>
        <optional>
            <feature name="SC"/>
            <optional>
                <feature name="U"/>
            </optional>
            <mandatory>
                <feature name="S">
                    <or>
                        <feature name="CS"/>
                        <feature name="PS"/>
                        <feature name="TS"/>
                    </or>
                </feature>
            </mandatory>
        </optional>
        <optional>
            <feature name="X"/>
        </optional>
        <feature_constraints>
            <feature_constraints>
                <feature_constraint fexpression="!D || !P"/>
                <feature_constraint fexpression="!P || R"/>
                <feature_constraint fexpression="!(D &amp;&amp; SC) || U"/>
            </feature_constraints>
        </feature_constraints>
    </feature>
</fm>