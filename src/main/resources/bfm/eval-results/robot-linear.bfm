<?xml version="1.0" encoding="UTF-8"?>
<bfm namespace="CleaningRobot">
    <feature name="Robot">
        <events>
            <event id="liDet_1" fexpression="(!Mapping &amp;&amp; Lidar)"> </event>
            <event id="charge"> </event>
            <event id="liDet_0" fexpression="(Mapping &amp;&amp; Lidar)"> </event>
            <event id="move_1" fexpression="!Mapping"> </event>
            <event id="caDet_0" fexpression="(Mapping &amp;&amp; Camera)"> </event>
            <event id="caDet_1" fexpression="(!Mapping &amp;&amp; Camera)"> </event>
            <event id="clean"> </event>
            <event id="goAround"> </event>
        </events>
        <optional>
            <feature name="Mapping">
                <events>
                    <event id="move_0" fexpression="Mapping"> </event>
                    <event id="map" fexpression="Mapping"> </event>
                </events>
                <event_constraints>
                    <causalities>
                        <causality target="move_0">
                            <bundle>
                                <event id="map"> </event>
                            </bundle>
                        </causality>
                    </causalities>
                </event_constraints>
            </feature>
        </optional>
        <mandatory>
            <feature name="ObstacleDetection">
                <alternative>
                    <feature name="Lidar"></feature>
                    <feature name="Camera"></feature>
                </alternative>
            </feature>
        </mandatory>
        <mandatory>
            <feature name="Cleaning"></feature>
        </mandatory>
        <event_constraints>
            <causalities>
                <causality target="charge">
                    <bundle>
                        <event id="clean"> </event>
                    </bundle>
                </causality>
                <causality target="liDet_0">
                    <bundle>
                        <event id="map"> </event>
                    </bundle>
                </causality>
                <causality target="caDet_0">
                    <bundle>
                        <event id="map"> </event>
                    </bundle>
                </causality>
                <causality target="move_0">
                    <bundle>
                        <event id="map"> </event>
                    </bundle>
                </causality>
                <causality target="clean">
                    <bundle>
                        <event id="move_1"> </event>
                        <event id="move_0"> </event>
                        <event id="goAround"> </event>
                    </bundle>
                </causality>
                <causality target="goAround">
                    <bundle>
                        <event id="liDet_1"> </event>
                        <event id="liDet_0"> </event>
                        <event id="caDet_0"> </event>
                        <event id="caDet_1"> </event>
                    </bundle>
                </causality>
            </causalities>
            <conflicts>
                <conflict>
                    <events>
                        <event id="move_1"> </event>
                        <event id="move_0"> </event>
                    </events>
                    <events>
                        <event id="liDet_1"> </event>
                        <event id="liDet_0"> </event>
                        <event id="caDet_0"> </event>
                        <event id="caDet_1"> </event>
                        <event id="goAround"> </event>
                    </events>
                </conflict>
                <conflict>
                    <events>
                        <event id="liDet_1"> </event>
                        <event id="caDet_0"> </event>
                        <event id="move_1"> </event>
                        <event id="move_0"> </event>
                        <event id="caDet_1"> </event>
                    </events>
                    <events>
                        <event id="liDet_0"> </event>
                    </events>
                </conflict>
                <conflict>
                    <events>
                        <event id="liDet_1"> </event>
                        <event id="liDet_0"> </event>
                        <event id="move_1"> </event>
                        <event id="caDet_1"> </event>
                        <event id="move_0"> </event>
                    </events>
                    <events>
                        <event id="caDet_0"> </event>
                    </events>
                </conflict>
                <conflict>
                    <events>
                        <event id="liDet_1"> </event>
                        <event id="liDet_0"> </event>
                        <event id="move_1"> </event>
                        <event id="caDet_0"> </event>
                        <event id="move_0"> </event>
                        <event id="map"> </event>
                    </events>
                    <events>
                        <event id="caDet_1"> </event>
                    </events>
                </conflict>
                <conflict>
                    <events>
                        <event id="liDet_1"> </event>
                        <event id="liDet_0"> </event>
                        <event id="caDet_0"> </event>
                        <event id="move_0"> </event>
                        <event id="caDet_1"> </event>
                        <event id="goAround"> </event>
                        <event id="map"> </event>
                    </events>
                    <events>
                        <event id="move_1"> </event>
                    </events>
                </conflict>
                <conflict>
                    <events>
                        <event id="liDet_0"> </event>
                        <event id="caDet_0"> </event>
                        <event id="move_1"> </event>
                        <event id="caDet_1"> </event>
                        <event id="move_0"> </event>
                        <event id="map"> </event>
                    </events>
                    <events>
                        <event id="liDet_1"> </event>
                    </events>
                </conflict>
            </conflicts>
        </event_constraints>
    </feature>
</bfm>